(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(5754)}])},5754:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>d});var n=l(7876),r=l(7328),t=l.n(r),o=l(4587),a=l.n(o);function d(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t(),{children:(0,n.jsx)("title",{children:"NEXT.JS CLOUDFLARE WORKERS"})}),(0,n.jsxs)("div",{className:"container max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[(0,n.jsx)("div",{className:"shadow-md bg-[#131313] mt-4 p-4 w-full rounded-lg",children:(0,n.jsxs)("header",{className:"p-6 flex flex-col justify-center items-center",children:[(0,n.jsx)(a(),{unoptimized:!0,src:"https://raw.githubusercontent.com/andregans/code_logotype/refs/heads/main/Next%20JS%20Logotype.png",alt:"Next.js on Cloudflare Workers Logo",width:0,sizes:"100vw",height:0,className:"w-56"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-center text-secondary mt-4",children:"Next.js on Cloudflare Workers"})]})}),(0,n.jsxs)("section",{className:"shadow-md bg-[#131313] mt-4 p-4 w-full rounded-lg",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-secondary",children:"CLONE REPOSITORY"}),(0,n.jsxs)("ol",{className:"list-decimal pl-6 text-white mb-4",children:[(0,n.jsx)("li",{children:(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"git clone https://github.com/RevanSP/NEXTJS-CLOUDFLARE-WORKERS-EXAMPLE.git"})}),(0,n.jsx)("li",{children:(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"cd NEXTJS-CLOUDFLARE-WORKERS-EXAMPLE"})}),(0,n.jsx)("li",{children:(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"bun install"})})]})]}),(0,n.jsxs)("section",{className:"shadow-md bg-[#131313] mt-4 p-4 w-full rounded-lg",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-secondary",children:"TESTING YOUR API"}),(0,n.jsxs)("p",{className:"mb-4",children:["To test your newly created REST API, visit the"," ",(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"/api/hello"})," route on Cloudflare Workers."]}),(0,n.jsxs)("p",{className:"mb-4",children:["Example URL:"," ",(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"https://nextjs-cloudflare-workers.revanspstudy28.workers.dev/api/hello"})]}),(0,n.jsx)("p",{className:"mb-4",children:"Expected JSON response:"}),(0,n.jsx)("pre",{className:"p-4 rounded-lg text-xs bg-[#222] overflow-x-auto",children:'{\n  "name": "John Doe"\n}'})]}),(0,n.jsxs)("section",{className:"shadow-md bg-[#131313] mt-4 p-4 w-full rounded-lg",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-secondary",children:"CLOUDFLARE WORKERS FEATURES SETUP"}),(0,n.jsx)("p",{className:"mb-4",children:"This project uses OpenNext and Cloudflare Workers for deployment. Here are the key configuration files and their features:"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2 text-secondary",children:"open-next.config.ts"}),(0,n.jsx)("p",{className:"mb-2",children:"This file configures OpenNext for Cloudflare Workers deployment:"}),(0,n.jsx)("pre",{className:"p-4 rounded-lg text-xs overflow-x-auto bg-[#222]",children:'import { defineCloudflareConfig } from "@opennextjs/cloudflare";\n\nexport default defineCloudflareConfig({});'})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2 text-secondary",children:"wrangler.jsonc"}),(0,n.jsx)("p",{className:"mb-2",children:"The Wrangler configuration file includes several important features:"}),(0,n.jsxs)("ul",{className:"list-disc pl-6 text-white mb-4",children:[(0,n.jsx)("li",{children:"Node.js compatibility mode enabled"}),(0,n.jsx)("li",{children:"Global fetch API support"}),(0,n.jsx)("li",{children:"Assets binding for static files"}),(0,n.jsx)("li",{children:"R2 bucket support (configurable)"}),(0,n.jsxs)("li",{children:["You can set your Worker name by modifying the"," ",(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"name"})," field."]})]}),(0,n.jsx)("pre",{className:"p-4 rounded-lg text-xs overflow-x-auto bg-[#222]",children:'{\n  "$schema": "node_modules/wrangler/config-schema.json",\n  "main": ".open-next/worker.js",\n  "name": "nextjs-cloudflare-workers",\n  "compatibility_date": "2024-12-30",\n  "compatibility_flags": [\n    "nodejs_compat",\n    "global_fetch_strictly_public"\n  ],\n  "r2_buckets": [],\n  "assets": {\n    "directory": ".open-next/assets",\n    "binding": "ASSETS"\n  }\n}'})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2 text-secondary",children:"Incremental Static Regeneration (ISR)"}),(0,n.jsx)("p",{className:"mb-2",children:"To enable ISR functionality in your Next.js application on Cloudflare Workers, you need to configure Cloudflare R2 storage:"}),(0,n.jsxs)("ol",{className:"list-decimal pl-6 text-white mb-4",children:[(0,n.jsx)("li",{children:"Create an R2 bucket in your Cloudflare account"}),(0,n.jsx)("li",{children:"Add the R2 bucket configuration to your wrangler.jsonc:"})]}),(0,n.jsx)("pre",{className:"p-4 rounded-lg bg-[#222] text-xs overflow-x-auto",children:'{\n  "r2_buckets": [\n    {\n      "binding": "BUCKET",\n      "bucket_name": "your-bucket-name"\n    }\n  ]\n}'}),(0,n.jsx)("p",{className:"mt-4 text-white",children:"The R2 bucket is used to store and serve regenerated pages for ISR. Without R2 storage configured, ISR features will not work properly on Cloudflare Workers."})]})]}),(0,n.jsxs)("section",{className:"shadow-md bg-[#131313] mt-4 p-4 w-full rounded-lg",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-secondary",children:"SETTING SECRETS WITH WRANGLER CLI"}),(0,n.jsxs)("p",{className:"mb-4",children:["To securely store sensitive data like API keys, use the Wrangler CLI secret feature. For example, to set a secret named"," ",(0,n.jsx)("code",{children:"API_KEY"}),", run:"]}),(0,n.jsx)("pre",{className:"p-4 rounded-lg bg-[#222] text-xs overflow-x-auto",children:"bunx wrangler secret put API_KEY"}),(0,n.jsx)("p",{className:"my-4",children:"After running the command, you will see a prompt like:"}),(0,n.jsx)("pre",{className:"p-4 rounded-lg bg-[#222] text-xs overflow-x-auto",children:'⛅️ wrangler 4.24.3 (update available 4.25.0)\n─────────────────────────────────────────────\n√ Enter a secret value: ... ********************************\n\uD83C\uDF00 Creating the secret for the Worker "your-worker-name"\n✨ Success! Uploaded secret API_KEY'}),(0,n.jsx)("p",{className:"my-4",children:"You’ll be asked to input the secret’s value directly in the terminal (input is hidden for security). Once successful, the secret will be available to your Worker as an environment variable."}),(0,n.jsx)("p",{className:"mb-4",children:"Access the secret in your Worker code like this:"}),(0,n.jsx)("pre",{className:"p-4 rounded-lg bg-[#222] text-xs overflow-x-auto",children:"const apiKey = env.API_KEY;"}),(0,n.jsxs)("p",{className:"mb-4",children:["Remember to configure your ",(0,n.jsx)("code",{children:"wrangler.toml"})," file properly to bind environment variables to your Worker."]})]}),(0,n.jsxs)("section",{className:"shadow-md bg-[#131313] mt-4 p-4 w-full rounded-lg",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-secondary",children:"CREATE & UPDATE DEPLOYMENT"}),(0,n.jsx)("p",{className:"mb-4",children:"Create and after making changes to your project, you can redeploy it to Cloudflare Workers by simply running:"}),(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"bun run deploy"}),(0,n.jsx)("p",{className:"mt-4",children:"This command will rebuild and update your existing deployment with the latest changes."}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2 text-secondary",children:"CONFIGURE BUILD & DEPLOY COMMANDS IN CLOUDFLARE DASHBOARD"}),(0,n.jsx)("p",{className:"mb-4",children:"You can also set these commands directly in the Cloudflare Workers Dashboard:"}),(0,n.jsxs)("ol",{className:"list-decimal pl-6 text-white mb-4",children:[(0,n.jsxs)("li",{children:["Go to ",(0,n.jsx)("strong",{children:"Workers & Pages"})," from the Cloudflare Dashboard"]}),(0,n.jsx)("li",{children:"Click on your deployed Worker"}),(0,n.jsxs)("li",{children:["Navigate to ",(0,n.jsx)("strong",{children:"Settings"})," >"," ",(0,n.jsx)("strong",{children:"Build Configuration"})]}),(0,n.jsx)("li",{children:"Fill in the fields as follows:"})]}),(0,n.jsxs)("ul",{className:"list-disc pl-6 text-white mb-4",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("code",{children:"Build Command"}),":"," ",(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"bun run build"})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("code",{children:"Deploy Command"}),":"," ",(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"bun run deploy"})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("code",{children:"Non-production Branch Deploy Command"}),":"," ",(0,n.jsx)("code",{className:"bg-[#222] px-1 rounded",children:"bun run deploy"})]})]}),(0,n.jsx)("p",{className:"text-white",children:"This ensures that deployments are handled automatically when you push changes to your repository."})]})]}),(0,n.jsx)("footer",{className:"mt-12 text-center text-gray-600",children:(0,n.jsx)("p",{children:"ReiiV. All rights reserved."})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[144,636,593,792],()=>s(2936)),_N_E=e.O()}]);